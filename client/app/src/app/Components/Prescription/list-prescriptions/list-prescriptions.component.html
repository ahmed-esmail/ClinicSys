<p-toast></p-toast>

<div class="card">
  <p-toolbar styleClass="mb-4">
    <ng-template pTemplate="left">

      <button pButton pRipple label="New Prescription" icon="pi pi-plus" class="p-button-success mr-2"
              (click)="showAdd()"></button>
    </ng-template>

  </p-toolbar>

  <p-table #dt [value]="prescriptionsList" [rowHover]="true" dataKey="id" responsiveLayout="scroll">

    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="id">ID
          <p-sortIcon field="id"></p-sortIcon>
        </th>
        <th pSortableColumn="date">date
          <p-sortIcon field="date"></p-sortIcon>
        </th>
        <th pSortableColumn="doctor">doctor
          <p-sortIcon field="doctor"></p-sortIcon>
        </th>
        <th pSortableColumn="patient">patient
          <p-sortIcon field="patient"></p-sortIcon>
        </th>
        <th pSortableColumn="medicines">medicines
          <p-sortIcon field="medicines"></p-sortIcon>
        </th>
        <th>Action</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-prescription>
      <tr>
        <!-- <td>
            <p-tableCheckbox [value]="prescription"></p-tableCheckbox>
        </td> -->
        <td>{{prescription._id}}</td>
        <td>{{prescription.date}}</td>
        <td>{{prescription.doctor}}</td>
        <td>{{prescription.patient.first_name}} {{prescription.patient.last_name}}</td>
        <!-- <td>{{prescription.medicines}}</td> -->
        <td>
          <p-table #dt2 [value]="prescription.medicines">
            <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="medicine">mdicine
          <p-sortIcon field="medicine"></p-sortIcon>
        </th>
        <!-- <th>medicines</th> -->
        <th pSortableColumn="dose">dose
          <p-sortIcon field="dose"></p-sortIcon>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-med>
      <tr>
        <td>{{med.medicine.name}}</td>
        <td>{{med.dose}}</td>
      </tr>
    </ng-template>
  </p-table>
  </td>
  <td>
    <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2"
            (click)="showEdit(prescription)"></button>
    <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning"
            (click)="clickDelete(prescription._id)"></button>
  </td>
  </tr>
  </ng-template>
  </p-table>
</div>

<p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>
